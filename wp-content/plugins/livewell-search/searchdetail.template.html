
<div class="search-container container">
	<div class="row">
		<div class="filter-container col-sm-3">
			<button class="view-map-btn" ng-click="openMapview()">See Listings in Map View</button>
			<h3 class="color-teal">Export Results</h3>
			<ul class="filter-list">
				<li>
					<a class="exportButton" data-toggle="modal" data-target="#emailModal">E-mail a link to your results</a>
				</li>
				<li ng-if="$ctrl.allowSave">
					<a class="saveSearchButton" data-toggle="modal" data-target="#saveSearchModal">Save your search</a>
				</li>
				<li>
					<a class="exportButton" data-toggle="modal" data-target="#pdfModal">Export listings to PDF</a>
				</li>
			</ul>
			<hr/>
			<!-- Modal -->
			<div class="modal fade" id="saveSearchModal" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Save This Search</h4>
						</div>
						<div class="modal-body">
							<fieldset>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirTitle">Title</label>
											<input class="form-control" type="text" id="searchName" placeholder="Please Enter a Title for this search"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
								</div>
							</fieldset>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="saveSearchURL()">Save</button>
						</div>
					</div>

				</div>
			</div>
			<!-- Modal -->
			<div class="modal fade" id="emailModal" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">E-mail a Link to Results</h4>
						</div>
						<div class="modal-body">
							<fieldset>
								<legend>Email Options</legend>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirTitle">Your Name</label>
											<input class="form-control" type="text" id="senderName" placeholder="Please Enter a Title"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirCreatedBy">E-mail To (required)</label>
											<input class="form-control" type="text" id="reciver" value=""><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirDescription">Subject</label>
											<input class="form-control" type="text" id="subject" value="Resources I found at Providence"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirDescription">textbody</label>
											<textarea class="form-control" id="textbody" rows="3">I found these resources at LiveWell Local</textarea>
										</div>
									</div>
								</div>
							</fieldset>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="sendResult()">Send</button>
						</div>
					</div>

				</div>
			</div>
			<!-- Modal -->
			<div class="modal fade" id="pdfModal" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Export Results as PDF</h4>
						</div>
						<div class="modal-body">
							<p><strong>Note:</strong> If you export too many result, <em>it takes more time.</em></p>
							<fieldset>
								<legend>Header Options</legend>
								<div class="row">
									<div class="col-sm-7">
										<div class="form-group has-feedback">
											<label for="dirTitle">Title (max. 60 characters)</label>
											<input class="form-control" type="text" id="dirTitle" maxlength="60" placeholder="Please Enter a Title"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="form-group has-feedback">
											<label for="dirSubtitle">Referred to</label>
											<input class="form-control" type="text" id="referredTo" maxlength="140"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-7">
										<div class="form-group has-feedback">
											<label for="dirDatePrinted">Date Printed</label>
											<input class="form-control" type="date" id="dirDatePrinted" value="2017-08-05"><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="form-group has-feedback">
											<label for="dirCreatedBy">Prepared By</label>
											<input class="form-control" type="text" id="preparedBy" value=""><span class="hidden glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
										</div>
									</div>

								</div>
								<div class="row">
									<div class="col-sm-12">
										<div class="form-group has-feedback">
											<label for="dirDescription">Description</label>
											<textarea class="form-control" id="PDFdescription" rows="3">This tailored list includes:</textarea>
										</div>
									</div>
								</div>
							</fieldset>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="outputPDF(filteredPrograms)">Open PDF in new Window</button>
							<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="downloadPDF(filteredPrograms)">Download PDF</button>
							<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="printPDF(filteredPrograms)">Print PDF</button>
						</div>
					</div>

				</div>
			</div>

			<div class="filters">
				<h3 class="color-orange">Search Filter</h3>
				<div class="function-area">
					<h4 class="function-header">Sort by</h4>
					<ul class="filter-list">
						<li ng-click="updateOrderBy('')" ng-class="{'selected': $ctrl.orderProp === ''}">
							<!--<input type="radio" ng-model="$ctrl.orderProp" ng-change="updateOrderBy()" value="">-->
							Relevance
						</li>
						<li ng-click="updateOrderBy('ProgramName')" ng-class="{'selected': $ctrl.orderProp === 'ProgramName'}">
							<!--<input type="radio" ng-model="$ctrl.orderProp" ng-change="updateOrderBy()" value="ProgramName">-->
							ProgramName
						</li>
						<li ng-click="updateOrderBy('AccountName')" ng-class="{'selected': $ctrl.orderProp === 'AccountName'}">
							<!--<input type="radio" ng-model="$ctrl.orderProp" ng-change="updateOrderBy()" value="AccountName">-->
							AccountName
						</li>
						<li ng-click="updateOrderBy('distance')" ng-class="{'selected': $ctrl.orderProp === 'distance'}">
							<!--<input type="radio" ng-model="$ctrl.orderProp" ng-change="updateOrderBy()" value="distance">-->
							Distance
						</li>
					</ul>
				</div>
				<div class="treeview hover">
					<ul style="list-style:none" class="lwl-topics-filter-list">
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Mental/Emotional/Spiritual')" ng-checked="checkFilter('dimension', 'Mental/Emotional/Spiritual')"><div class="mentalIcon icon inline-block"></div><label class="inline-block">Mental, Emotional & Spiritual</label></li>
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Neighborhood and Natural Environment')" ng-checked="checkFilter('dimension', 'Neighborhood and Natural Environment')"><div class="neighborIcon icon inline-block"></div><label class="inline-block">Neighborhood/Natural Environment</label></li>
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Physical Health')" ng-checked="checkFilter('dimension', 'Physical Health')"><div class="physicalIcon icon inline-block"></div><label class="inline-block">Physical Health</label></li>
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Relationships')" ng-checked="checkFilter('dimension', 'Relationships')"><div class="relastionlIcon icon inline-block"></div><label class="inline-block">Relationships & Social Connection</label></li>
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Security/Basic Needs')" ng-checked="checkFilter('dimension', 'Security/Basic Needs')"><div class="securityIcon icon inline-block"></div><label class="inline-block">Security & Basic Need</label></li>
						<li><input class="inline-block" type="checkbox" ng-click="includeFilter('dimension', 'Work/Learning & Growth')" ng-checked="checkFilter('dimension', 'Work/Learning & Growth')"><div class="workIcon icon inline-block"></div><label class="inline-block">Work, Learning & Growth</label></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="result-container col-sm-9">
			<div ng-if="filteredPrograms">
				{{filteredPrograms.length}} result(s)
			</div>
			<div>
				<div class="detail-view row">
					<div class="info col-sm-7">
						<div class="back-to-list">
							<span class="back-to-list-link" ng-click="backToSearch()">back to listing</span>
						</div>
						<div class="row">
							<div class="col-sm-10">
								<h3 class="title">
									{{$ctrl.currentProgram.AccountName}}
								</h3>
							</div>
							<div class="col-sm-2">
								<span ng-if="$ctrl.allowSave" class="star-icon" ng-click="addFavorite($ctrl.currentProgram)" ng-class="{'active': $ctrl.currentProgram.saved}"></span>
							</div>
						</div>
						<div class="description">
							{{$ctrl.currentProgram.Description__c}}
						</div>
						<h3 class="title">
							Location
						</h3>
						<ng-map default-style="true" id="map" zoom="10" scrollwheel="false" center="{{$ctrl.currentProgram.latlng}}">
						    <marker position="{{$ctrl.currentProgram.latlng}}" title="allen" on-click="map.showInfoWindow(event, 'bar')">
						    </marker>
								<info-window id="bar" max-width="280">
					        <div ng-non-bindable>
					          <div id="siteNotice"></div>
					          <h4 style="color:#06c">{{$ctrl.currentProgram.AccountName}}</h4>
					          <div id="bodyContent">
					            <p>
												<b>{{$ctrl.currentProgram.ProgramName}}</b><br>
						            {{$ctrl.currentProgram.fullAddress}}<br>

						            <a href="https://maps.google.com/?daddr={{$ctrl.currentProgram.fullAddress}}&saddr=Current%20Location">
						              Directions
						            </a>
					            </p>
					          </div>
					        </div>
					      </info-window>
					    </ng-map>
						<div class="address" id="address">
					    	<span class="service-name">
								{{$ctrl.currentProgram.ProgramName}}
							</span>
							</br>
							<span>
							{{$ctrl.currentProgram.fullAddress}}
							</span>
							</br>
						</div>
						<div ng-if="$ctrl.currentProgram.distance" class="distance">
							{{$ctrl.currentProgram.distance}} miles - <a href="https://maps.google.com/?daddr={{$ctrl.currentProgram.fullAddress}}&saddr=Current%20Location">Get Directions</a>
						</div>
						<div>
							<strong>Phone: </strong>206-123-4567
						</div>
						<div>
							<strong>Website: </strong><a href="#">TBD</a>
						</div>
						<div>
							<strong>Business Hours: </strong><br>

						</div>
					</div>
					<div class="location col-sm-5">
						<div ng-show="$ctrl.currentProgram.otherLocations.length>0">
							<h3 class="title">Other Locations</h3>
							<div class="location-content">
								<div ng-repeat="otherLocation in $ctrl.currentProgram.otherLocations" style="padding-bottom:5px">
									<a ng-click="$ctrl.openDetailPage(otherLocation)">{{otherLocation.Address__c}}</a><br>
									{{otherLocation.fullAddress}}
								</div>
							</div>
						</div>
						<div ng-show="$ctrl.currentProgram.otherServices.length>0">
							<h3 class="title">Other Services</h3>
							<div class="services-content">
								<div ng-repeat="otherService in $ctrl.currentProgram.otherServices" style="padding-bottom:5px">
									<a ng-click="$ctrl.openDetailPage(otherService)">{{otherService.ProgramName}}</a><br>
								</div>
							</div>
						</div>
						<div ng-show="$ctrl.currentProgram.relatedServices.length>0">
							<h3 class="title">Related Services</h3>
							<div class="related-serivices-content">
								<div ng-repeat="relatedService in $ctrl.currentProgram.relatedServices" style="padding-bottom:5px">
									<a ng-click="$ctrl.openDetailPage(relatedService)">{{relatedService.ProgramName}}</a><br>
									{{relatedService.fullAddress}}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
